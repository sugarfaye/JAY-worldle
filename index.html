<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¨æ°ä¼¦æ­Œæ›² Wordle</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #1a1a1a;
            font-size: 24px;
            text-align: center;
        }
        #game-board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
            margin-bottom: 20px;
        }
        .tile {
            width: 40px;
            height: 40px;
            border: 2px solid #d3d6da;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            background-color: #ffffff;
            transition: all 0.3s ease;
        }
        #guess-input {
            margin-bottom: 10px;
            padding: 5px;
            font-size: 16px;
            width: 80%;
            max-width: 300px;
        }
        #submit-guess, #share-result {
            padding: 10px 15px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        #submit-guess:hover, #share-result:hover {
            background-color: #45a049;
        }
        #message {
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
        }
        @media (max-width: 600px) {
            .tile {
                width: 30px;
                height: 30px;
                font-size: 16px;
            }
            #game-board {
                gap: 3px;
            }
            body {
                padding: 10px;
            }
            h1 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <h1>å‘¨æ°ä¼¦æ­Œæ›² Wordle</h1>
    <div id="game-board"></div>
    <input type="text" id="guess-input" placeholder="è¾“å…¥æ­Œæ›²åç§°">
    <button id="submit-guess">ç¡®è®¤</button>
    <button id="share-result" style="display: none;">åˆ†äº«ç»“æœ</button>
    <div id="message"></div>

    <script>
        const songs = ["æ‰¯","æ«","æ˜Ÿæ™´","å¨˜å­","æ–—ç‰›","å¿è€…","å®‰é™","æš—å·","é¾™æ‹³","åˆ†è£‚","æ‡¦å¤«","æ™´å¤©","æ¢¯ç”°","åŒåˆ€","å€Ÿå£","å¤–å©†","å°†å†›","ææµ…","å¤œæ›²","é€†é³","æ¼‚ç§»","é€€å","å¿ƒé›¨","å½©è™¹","æ— åŒ","è›‡èˆ","èŠ±æµ·","ç¨»é¦™","ç´ä¼¤","æ‰‹è¯­","å‚»ç¬‘","çªƒçˆ±","è‹±é›„","ä¸è¯¥","å€’å½±","é¾™å·é£","ç®€å•çˆ±","å¯¹ä¸èµ·","åŒæˆªæ£","åŠå…½äºº","ä¸œé£ç ´","ä¸ƒé‡Œé¦™","å›­æ¸¸ä¼š","å‘å¦‚é›ª","éº¦èŠ½ç³–","çŠç‘šæµ·","çº¢æ¨¡ä»¿","è¿·è¿­é¦™","èŠèŠ±å°","é’èŠ±ç“·","æˆ‘ä¸é…","ç”œç”œçš„","å…°äº­åº","æ—¶å…‰æœº","è·¨æ—¶ä»£","æƒŠå¹å·","è¿·é­‚æ›²","å…¬ä¸»ç—…","ä½ å¥½å—","çš®å½±æˆ","æ˜æ˜å°±","å¤§ç¬¨é’Ÿ","é˜³æ˜å±±","æ€ä¹ˆäº†","ç¾äººé±¼","ä¸€ç‚¹ç‚¹","å¯çˆ±å¥³äºº","å®Œç¾ä¸»ä¹‰","é»‘è‰²å¹½é»˜","ä¼Šæ–¯å¦å ¡","å¼€ä¸äº†å£","å¨å»‰å¤å ¡","åŠå²›é“ç›’","å›åˆ°è¿‡å»","ä»¥çˆ¶ä¹‹å","ä¸‰å¹´äºŒç­","ä½ å¬å¾—åˆ°","å¥¹çš„ç«æ¯›","çˆ±æƒ…æ‚¬å´–","æˆ‘çš„åœ°ç›˜","ä¹±èˆæ˜¥ç§‹","å›°å…½ä¹‹æ–—","æ­¢æˆ˜ä¹‹æ®‡","è“è‰²é£æš´","é»‘è‰²æ¯›è¡£","å››é¢æ¥šæ­Œ","æµªæ¼«æ‰‹æœº","ä¸€è·¯å‘åŒ—","åƒé‡Œä¹‹å¤–","æœ¬è‰çº²ç›®","ç™½è‰²é£è½¦","ç‰›ä»”å¾ˆå¿™","é˜³å…‰å®…ç”·","é¾™æˆ˜éª‘å£«","é­”æœ¯å…ˆç”Ÿ","æµæµªè¯—äºº","ä¹”å…‹å”å”","è¯´äº†å†è§","çƒŸèŠ±æ˜“å†·","å¥½ä¹…ä¸è§","å˜»å“ˆç©ºå§","è‡ªå¯¼è‡ªæ¼”","æ°´æ‰‹æ€•æ°´","ä¸–ç•Œæœ«æ—¥","è¶…è·‘å¥³ç¥","å››å­£åˆ—è½¦","çˆ±ä½ æ²¡å·®","çº¢å°˜å®¢æ ˆ","æ¢¦æƒ³å¯åŠ¨","ä¹Œå…‹ä¸½ä¸½","å¤©æ¶¯è¿‡å®¢","æˆ‘è¦å¤å¤©","åºŠè¾¹æ•…äº‹","è¯´èµ°å°±èµ°","å‰ä¸–æƒ…äºº","å‘Šç™½æ°”çƒ","çˆ±æƒ…åºŸæŸ´","è¿˜åœ¨æµæµª","è¯´å¥½ä¸å“­","çº¢é¢œå¦‚éœœ","ç­‰ä½ ä¸‹è¯¾","ç²‰è‰²æµ·æ´‹","åæ–¹å‘çš„é’Ÿ","çˆ±åœ¨è¥¿å…ƒå‰","çˆ¸æˆ‘å›æ¥äº†","ç«è½¦å¨ä½å»","çˆ·çˆ·æ³¡çš„èŒ¶","æœ€åçš„æˆ˜å½¹","åŒä¸€ç§è°ƒè°ƒ","å¤œçš„ç¬¬ä¸ƒç« ","å¬å¦ˆå¦ˆçš„è¯","æœ€é•¿çš„ç”µå½±","é›¨ä¸‹ä¸€æ•´æ™š","è¶…äººä¸ä¼šé£","ç–—ä¼¤çƒ§è‚‰ç²½","å…¬å…¬åå¤´ç—›","å“ªé‡Œéƒ½æ˜¯ä½ ","ç®—ä»€ä¹ˆç”·äºº","æ‰‹å†™çš„ä»å‰","é‹å­ç‰¹å¤§å·","å¬çˆ¸çˆ¸çš„è¯","é”™è¿‡çš„çƒŸç«","å°åœ°å®‰è€æ–‘é¸ ","ä¸Šæµ·ä¸€ä¹å››ä¸‰","ç±³å…°çš„å°é“åŒ ","è’²å…¬è‹±çš„çº¦å®š","è¯´å¥½çš„å¹¸ç¦å‘¢","çˆ±çš„é£è¡Œæ—¥è®°","ä¸€å£æ°”å…¨å¿µå¯¹","åœŸè€³å…¶å†°æ·‡æ·‹","æœ€ä¼Ÿå¤§çš„ä½œå“","ä¸çˆ±æˆ‘å°±æ‹‰å€’","æˆ‘æ˜¯å¦‚æ­¤ç›¸ä¿¡","å…è´¹æ•™å­¦å½•å½±å¸¦","æˆ‘è½æ³ªæƒ…ç»ªé›¶ç¢","æ¯”è¾ƒå¤§çš„å¤§æç´","å¬è§ä¸‹é›¨çš„å£°éŸ³","ç»™æˆ‘ä¸€é¦–æ­Œçš„æ—¶é—´"];

        let targetSong;
        let guessCount = 0;
        const maxGuesses = 6;

        function getTodayDate() {
            return new Date().toISOString().split('T')[0];
        }

        function canPlayToday() {
            const lastPlayedDate = localStorage.getItem('lastPlayedDate');
            const today = getTodayDate();
            return lastPlayedDate !== today;
        }

        function setPlayedToday() {
            localStorage.setItem('lastPlayedDate', getTodayDate());
        }

        function initGame() {
            if (!canPlayToday()) {
                document.getElementById('message').textContent = 'ä»Šå¤©å·²ç»ç©è¿‡äº†ï¼Œæ˜å¤©å†æ¥å§ï¼';
                document.getElementById('guess-input').style.display = 'none';
                document.getElementById('submit-guess').style.display = 'none';
                return;
            }

            targetSong = songs[Math.floor(Math.random() * songs.length)];
            guessCount = 0;
            const gameBoard = document.getElementById('game-board');
            gameBoard.innerHTML = '';
            for (let i = 0; i < maxGuesses; i++) {
                for (let j = 0; j < 8; j++) {
                    const tile = document.createElement('div');
                    tile.classList.add('tile');
                    gameBoard.appendChild(tile);
                }
            }
            document.getElementById('guess-input').style.display = 'block';
            document.getElementById('submit-guess').style.display = 'block';
            document.getElementById('share-result').style.display = 'none';
            document.getElementById('message').textContent = '';
        }

        function submitGuess() {
            const guessInput = document.getElementById('guess-input');
            const guess = guessInput.value.trim();
            const messageElement = document.getElementById('message');

            if (!songs.includes(guess)) {
                messageElement.textContent = 'æ— è¯¥é¦–æ­Œæ›²';
                return;
            }

            if (guessCount >= maxGuesses) {
                endGame(false);
                return;
            }

            const result = checkGuess(guess);
            displayResult(result, guessCount);
            guessCount++;

            if (guess === targetSong) {
                endGame(true);
            } else if (guessCount === maxGuesses) {
                endGame(false);
            }

            guessInput.value = '';
        }

        function endGame(isWin) {
            const messageElement = document.getElementById('message');
            if (isWin) {
                messageElement.textContent = 'æ­å–œä½ çŒœå¯¹äº†ï¼';
            } else {
                messageElement.textContent = `æ¸¸æˆç»“æŸï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${targetSong}`;
            }
            document.getElementById('guess-input').style.display = 'none';
            document.getElementById('submit-guess').style.display = 'none';
            document.getElementById('share-result').style.display = 'block';
            setPlayedToday();
        }

        function checkGuess(guess) {
            const result = [];
            const targetChars = targetSong.split('');
            const guessChars = guess.split('');

            for (let i = 0; i < 8; i++) {
                if (i < guessChars.length) {
                    if (guessChars[i] === targetChars[i]) {
                        result.push('correct');
                    } else if (targetChars.includes(guessChars[i])) {
                        result.push('present');
                    } else {
                        result.push('absent');
                    }
                } else {
                    result.push('empty');
                }
            }

            return result;
        }

        function displayResult(result, row) {
            const tiles = document.querySelectorAll('.tile');
            const startIndex = row * 8;
            const guess = document.getElementById('guess-input').value;

            for (let i = 0; i < 8; i++) {
                const tile = tiles[startIndex + i];
                const guessChar = guess[i] || '';

                if (guessChar) {
                    setTimeout(() => {
                        tile.textContent = guessChar;
                        tile.style.transform = 'rotateX(180deg)';
                        
                        setTimeout(() => {
                            tile.classList.remove('correct', 'present', 'absent', 'filled');
                            tile.classList.add('filled');
                            switch (result[i]) {
                                case 'correct':
                                    tile.classList.add('correct');
                                    tile.style.backgroundColor = '#6aaa64';
                                    tile.style.borderColor = '#6aaa64';
                                    break;
                                case 'present':
                                    tile.classList.add('present');
                                    tile.style.backgroundColor = '#c9b458';
                                    tile.style.borderColor = '#c9b458';
                                    break;
                                case 'absent':
                                    tile.classList.add('absent');
                                    tile.style.backgroundColor = '#787c7e';
                                    tile.style.borderColor = '#787c7e';
                                    break;
                            }
                            tile.style.transform = 'rotateX(0deg)';
                        }, 250);
                    }, i * 250);
                } else {
                    tile.textContent = '';
                    tile.style.transform = '';
                    tile.classList.remove('correct', 'present', 'absent', 'filled');
                    tile.style.backgroundColor = '#ffffff';
                    tile.style.borderColor = '#d3d6da';
                }
            }
        }

        function generateShareText() {
            let shareText = `å‘¨æ°ä¼¦æ­Œæ›² Wordle ${guessCount}/6\n\n`;
            const tiles = document.querySelectorAll('.tile');
            for (let i = 0; i < guessCount; i++) {
                let rowEmojis = '';
                for (let j = 0; j < 8; j++) {
                    const tile = tiles[i * 8 + j];
                    if (tile.classList.contains('correct')) {
                        rowEmojis += 'ğŸŸ©';
                    } else if (tile.classList.contains('present')) {
                        rowEmojis += 'ğŸŸ¨';
                    } else if (tile.classList.contains('absent')) {
                        rowEmojis += 'â¬›';
                    } else {
                        rowEmojis += 'â¬œ';
                    }
                }
                shareText += rowEmojis + '\n';
            }
            return shareText;
        }

        function shareResult() {
            const shareText = generateShareText();
            
            if (navigator.share) {
                navigator.share({
                    title: 'å‘¨æ°ä¼¦æ­Œæ›² Wordle',
                    text: shareText,
                }).catch(error => {
                    console.error('åˆ†äº«å¤±è´¥:', error);
                    fallbackShare(shareText);
                });
            } else {
                fallbackShare(shareText);
            }
        }

        function fallbackShare(shareText) {
            navigator.clipboard.writeText(shareText).then(() => {
                alert('æ¸¸æˆç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨åˆ†äº«ã€‚');
            }).catch(err => {
                console.error('å¤åˆ¶åˆ°å‰ªè´´æ¿å¤±è´¥:', err);
                alert('åˆ†äº«å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š\n\n' + shareText);
            });
        }

        document.getElementById('submit-guess').addEventListener('click', submitGuess);
        document.getElementById('guess-input').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                submitGuess();
            }
        });
        document.getElementById('share-result').addEventListener('click', shareResult);

        // éšè—æŒ‰é”®è§¦å‘é‡ç½®æ¸¸æˆçŠ¶æ€
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.altKey && event.key === 'r') {
                localStorage.removeItem('lastPlayedDate');
                initGame();
            }
        });

        initGame();
    </script>
</body>
</html>